#See https://docs.cekit.io/en/latest/descriptor/overrides.html
name: &name "amq-broker-7/amq-broker-710-openj9-11-rhel8"

labels:
  - name: "com.redhat.component"
    value: "amq-broker-openj9-11-rhel8-container"

envs:
  - name: "JBOSS_IMAGE_NAME"
    value: *name

modules:
  repositories:
    - name: cct_module
      git:
        url: https://github.com/artemiscloud/cct_module.git
        ref: 0.38.0-amq-1
  install:
    - name: jboss.container.openjdk.jdk
      version: "semeru-11-open"

packages:
  content_sets:
    s390x:
      - rhel-8-for-s390x-baseos-rpms
      - rhel-8-for-s390x-appstream-rpms
      - openj9-1-for-rhel-8-s390x-rpms
    ppc64le:
      - rhel-8-for-ppc64le-baseos-rpms
      - rhel-8-for-ppc64le-appstream-rpms
      - openj9-1-for-rhel-8-ppc64le-rpms

osbs:
  configuration:
    container: #See https://osbs.readthedocs.io/en/latest/users.html#image-configuration
      compose:
        inherit: true
        signing_intent: release
        pulp_repos: true
        packages:
          - ibm-semeru-open-11-jdk
      platforms:
        only:
          - s390x
          - ppc64le
      image_build_method: imagebuilder
      tags:
        - "7.10.0.ER1"

  repository:
    name: containers/amq-broker
    branch: amq-broker-7.10-openj9-11-rhel-8
